@startuml Blackjack

title ãƒ–ãƒ©ãƒƒã‚¯ã‚¸ãƒ£ãƒƒã‚¯ã‚²ãƒ¼ãƒ å…¨ä½“ã®æµã‚Œ

skinparam responseMessageBelowArrow true
skinparam actorStyle awesome

participant Main order 10
participant Game order 20
participant Message order 30
actor Dealer order 40
actor "<<Manual>>\nPlayer" as mp order 50 #AliceBlue
actor "<<Auto>>\nPlayer" as ap order 60 #LavenderBlush
participant Deck order 70
participant Card order 80

Main -> Game : Game ã‚’ new ã™ã‚‹

group #LightGoldenRodYellow Game ã‚’ new ã™ã‚‹
  activate Game
  Game ->  Dealer : Dealer ã‚’ new ã™ã‚‹
  activate  Dealer
  Game -> Deck : Deck ã‚’ new ã™ã‚‹
  activate Deck
  Deck -> Card : ã‚«ãƒ¼ãƒ‰52æšã‚’å–å¾—ã™ã‚‹
  activate Card
  Card --> Deck : ã‚«ãƒ¼ãƒ‰52æšã‚’è¿”å´ã™ã‚‹
  deactivate Card

  Game -> mp : Player ã‚’ new ã™ã‚‹
  activate mp #AliceBlue
end

Main -> Game : ãƒ–ãƒ©ãƒƒã‚¯ã‚¸ãƒ£ãƒƒã‚¯ã‚’\né–‹å§‹ã™ã‚‹

group #LightGoldenRodYellow ã‚²ãƒ¼ãƒ ã®è¨­å®šã‚’ã™ã‚‹
  Game -> Message : ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æ•°ã‚’æ±ºã‚ã‚‹(ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º)
  note over Message
  ãƒ–ãƒ©ãƒƒã‚¯ã‚¸ãƒ£ãƒƒã‚¯ã®è¨­å®šã‚’ã—ã¾ã™ã€‚
  ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®äººæ•°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚ï¼ˆ1ã€œ3ï¼‰
  ğŸ™‹â€ 2
  ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼2åã§ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹ã—ã¾ã™ã€‚
  end note

  Game -> ap : æ±ºã‚ãŸäººæ•°ã® NPC ã‚’ new ã™ã‚‹
  activate ap #LavenderBlush
end

group #LightGoldenRodYellow ãƒ™ãƒƒãƒˆã™ã‚‹é¡ã‚’æ±ºã‚ã‚‹
  Game -> Message : ãƒ™ãƒƒãƒˆã™ã‚‹é¡ã‚’æ±ºã‚ã‚‹(ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º)
  note over Message
  ã‚ãªãŸã®æŒã£ã¦ã„ã‚‹ãƒãƒƒãƒ—ã¯100ãƒ‰ãƒ«ã§ã™ã€‚
  ãƒ™ãƒƒãƒˆã™ã‚‹é¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚ï¼ˆ1ã€œ1000ãƒ‰ãƒ«ï¼‰
  ğŸ’² 10
  10ãƒ‰ãƒ«ã‚’ãƒ™ãƒƒãƒˆã—ã¾ã—ãŸã€‚
  end note
  Game -> mp : Player ã® ãƒ™ãƒƒãƒˆã™ã‚‹é¡ ã‚’æ±ºã‚ãŸé¡ã«å¤‰æ›´ã™ã‚‹
end

ref over Game
  åˆ¥æ·»ã€Œï¼‘ã‚²ãƒ¼ãƒ ã®æµã‚Œã€
  ãƒ»ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹ã™ã‚‹
  ãƒ»ã‚²ãƒ¼ãƒ ã‚’é€²è¡Œã™ã‚‹
  ãƒ»çµæœã‚’åˆ¤å®šã™ã‚‹
end ref

group #LightGoldenRodYellow ãƒãƒƒãƒ—ã‚’è¨ˆç®—ã™ã‚‹
    Game -> Dealer : ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼ã¯ãƒãƒƒãƒ—ã‚’è¨ˆç®—ã™ã‚‹
    Dealer -> mp : Player ã®åˆè¨ˆãƒãƒƒãƒ—æ•°ã‚’å¤‰æ›´ã™ã‚‹

    alt å‹ã£ãŸäººï¼ˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ â†’ winï¼‰
      Dealer ->  Message : ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹
      note over Message #Yellow
        å‹ã£ãŸã®ã§ 5 ãƒãƒƒãƒ—ã¨åŒé¡ã®é…å½“ã‚’å¾—ã‚‰ã‚Œã¾ã™ã€‚
        ã‚ãªãŸã®ãƒãƒƒãƒ—æ®‹é«˜ã¯ 105 ãƒ‰ãƒ«ã§ã™ã€‚
      end note

    else è² ã‘ãŸäººï¼ˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ â†’ loseï¼‰
      Dealer ->  Message : ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹
      note over Message #Yellow
        è² ã‘ãŸãŸã‚ã€ãƒãƒƒãƒ— 5 ãƒ‰ãƒ«ã¯æ²¡åã•ã‚Œã¾ã™ã€‚
        ã‚ãªãŸã®ãƒãƒƒãƒ—æ®‹é«˜ã¯ 95 ãƒ‰ãƒ«ã§ã™ã€‚
      end note
    else å¼•ãåˆ†ã‘ãŸäººï¼ˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ â†’ drawï¼‰
      Dealer ->  Message : ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹
      note over Message #Yellow
        å¼•ãåˆ†ã‘ãŸãŸã‚ã€ãƒãƒƒãƒ— 5 ãƒ‰ãƒ«ã¯ãã®ã¾ã¾ã§ã™ã€‚
        ã‚ãªãŸã®ãƒãƒƒãƒ—æ®‹é«˜ã¯ 100 ãƒ‰ãƒ«ã§ã™ã€‚
      end note
    end
end

group #LightGoldenRodYellow ã‚²ãƒ¼ãƒ ã‚’ç¶šã‘ã‚‹ã‹ã€ã‚„ã‚ã‚‹ã‹ã‚’é¸æŠã™ã‚‹

    alt ãƒãƒƒãƒ—æ®‹é«˜ãŒã‚ã‚‹å ´åˆ
      Game ->  Message : ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹
      note over Message #Yellow
        ãƒ–ãƒ©ãƒƒã‚¯ã‚¸ãƒ£ãƒƒã‚¯ã‚²ãƒ¼ãƒ ã‚’ç¶šã‘ã¾ã™ã‹ï¼Ÿï¼ˆY/Nï¼‰
      end note
    else ãƒãƒƒãƒ—æ®‹é«˜ãŒ 0 ã®å ´åˆ
      Game ->  Message : ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹
      note over Message #Yellow
        ã‚ãªãŸã¯ã€ãƒãƒƒãƒ—ã®æ®‹é«˜ãŒãªããªã‚Šã¾ã—ãŸã€‚
      end note
    end
end
alt ã‚²ãƒ¼ãƒ ç¶šè¡Œ
  note over Game
    æ¬¡ã®ã‚²ãƒ¼ãƒ ã¸
    ï¼ˆã€Œãƒ™ãƒƒãƒˆã™ã‚‹é¡ã‚’æ±ºã‚ã‚‹ã€ã¾ã§æˆ»ã‚‹ï¼‰
  end note
else ã‚²ãƒ¼ãƒ çµ‚äº†
  Game --> Main : ã‚²ãƒ¼ãƒ çµ‚äº†
end
  deactivate Dealer
  deactivate mp
  deactivate ap
  deactivate Deck
deactivate Game
@enduml
