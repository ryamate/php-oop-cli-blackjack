@startuml Blackjack

title åˆ¥æ·»ã€Œï¼‘ã‚²ãƒ¼ãƒ ã®æµã‚Œã€

skinparam responseMessageBelowArrow true
skinparam actorStyle awesome

participant Main order 10
participant Game order 20
participant Message order 30
actor Dealer order 40
actor "<<Manual>>\nPlayer" as mp order 50 #AliceBlue
actor "<<Auto>>\nPlayer" as ap order 60 #LavenderBlush
participant Deck order 70
participant Card order 80

group #LightGoldenRodYellow ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹ã™ã‚‹
  Game -> Dealer : ãƒ‡ãƒƒã‚­ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã™ã‚‹
  Dealer -> Deck : ãƒ‡ãƒƒã‚­ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã™ã‚‹

  Dealer -> Deck : ãƒ‡ãƒƒã‚­ã‹ã‚‰ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«æ‰‹æœ­2æšã‚’é…ã‚‹
  Deck --> mp

  Dealer -> Deck : ãƒ‡ãƒƒã‚­ã‹ã‚‰ NPC ã«æ‰‹æœ­2æšã‚’é…ã‚‹
  Deck --> ap

  Dealer -> Deck : ãƒ‡ãƒƒã‚­ã‹ã‚‰ ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼ ã«æ‰‹æœ­2æšã‚’é…ã‚‹
  Deck --> Dealer

  Game ->  Message : ãƒ–ãƒ©ãƒƒã‚¯ã‚¸ãƒ£ãƒƒã‚¯ã®é–‹å§‹æ™‚ã®\nãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹

  note over Message
    ãƒ–ãƒ©ãƒƒã‚¯ã‚¸ãƒ£ãƒƒã‚¯ã‚’é–‹å§‹ã—ã¾ã™ã€‚
    ã‚ãªãŸã®å¼•ã„ãŸã‚«ãƒ¼ãƒ‰ã¯ãƒãƒ¼ãƒˆã®7ã§ã™ã€‚
    ã‚ãªãŸã®å¼•ã„ãŸã‚«ãƒ¼ãƒ‰ã¯ã‚¯ãƒ©ãƒ–ã®8ã§ã™ã€‚

    ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼ã®å¼•ã„ãŸã‚«ãƒ¼ãƒ‰ã¯ãƒ€ã‚¤ãƒ¤ã®Qã§ã™ã€‚
    ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼ã®å¼•ã„ãŸ2æšç›®ã®ã‚«ãƒ¼ãƒ‰ã¯ã‚ã‹ã‚Šã¾ã›ã‚“ã€‚

    ã‚ãªãŸã®ç¾åœ¨ã®å¾—ç‚¹ã¯15ã§ã™ã€‚ã‚«ãƒ¼ãƒ‰ã‚’å¼•ãã¾ã™ã‹ï¼Ÿï¼ˆY/Nï¼‰
  end note

end

group #LightGoldenRodYellow ã‚²ãƒ¼ãƒ ã‚’é€²è¡Œã™ã‚‹

  activate Dealer
  activate mp #AliceBlue
  activate ap #LavenderBlush
  activate Deck
  activate Game

  group #AliceBlue Player(ã‚ãªãŸ)ã¯ Hit ã‹ Stand ã‹ã‚’é¸æŠã™ã‚‹
    alt Y (Hit)
      Game -> mp : ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯1æšã‚«ãƒ¼ãƒ‰ã‚’å¼•ã
      mp -> Deck : 1æšã‚«ãƒ¼ãƒ‰ã‚’å¼•ã
      Deck --> mp : 1æšã‚«ãƒ¼ãƒ‰ã‚’è¿”ã™
      mp -> mp : å¾—ç‚¹ã‚’è¨ˆç®—ã™ã‚‹

      Game -> Dealer : ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼ã¯ãƒãƒ¼ã‚¹ãƒˆã‹å¦ã‹ãƒã‚§ãƒƒã‚¯ã™ã‚‹
      Dealer -> mp : ãƒãƒ¼ã‚¹ãƒˆã‹å¦ã‹ãƒã‚§ãƒƒã‚¯ã™ã‚‹

      alt ã‚«ãƒ¼ãƒ‰ã®åˆè¨ˆå€¤ãŒ 21 ã‚’è¶…ãˆã¦ã„ãªã„å ´åˆ
        Dealer --> Game :

        Game ->  Message : ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹
        note over Message
          ã‚ãªãŸã®å¼•ã„ãŸã‚«ãƒ¼ãƒ‰ã¯ã‚¹ãƒšãƒ¼ãƒ‰ã®ï¼•ã§ã™ã€‚
          ã‚ãªãŸã®ç¾åœ¨ã®å¾—ç‚¹ã¯20ã§ã™ã€‚ã‚«ãƒ¼ãƒ‰ã‚’å¼•ãã¾ã™ã‹ï¼Ÿï¼ˆY/Nï¼‰
        end note
      else Burst (ã‚«ãƒ¼ãƒ‰ã®åˆè¨ˆå€¤ãŒ 21 ã‚’è¶…ãˆã¦ã„ãŸå ´åˆ)
        Dealer -> mp : ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’\nã€Œburstã€ã«å¤‰æ›´ã™ã‚‹
        Dealer --> Game :

      end
    else N (Stand)

      Game ->  Message : ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹
      note over Message
        ã‚ãªãŸã®å¼•ã„ãŸ2æšç›®ã®ã‚«ãƒ¼ãƒ‰ã¯ãƒ€ã‚¤ãƒ¤ã®2ã§ã—ãŸã€‚
        ã‚ãªãŸã®ç¾åœ¨ã®å¾—ç‚¹ã¯12ã§ã™ã€‚
      end note

      Game -> mp : ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’\nã€Œstandã€ã«å¤‰æ›´ã™ã‚‹

    else å†å…¥åŠ›
      Game ->  Message : ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹
      note over Message
        Y/N ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚ã‚«ãƒ¼ãƒ‰ã‚’å¼•ãã¾ã™ã‹ï¼Ÿï¼ˆY/Nï¼‰
      end note
      Game -> Game : å†å…¥åŠ›
    end

    alt Burst (ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ã‚«ãƒ¼ãƒ‰ã®åˆè¨ˆå€¤ãŒ 21 ã‚’è¶…ãˆã¦ã„ãŸå ´åˆ)

      Game ->  Message : ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹
      note over Message #Yellow
        ã‚ãªãŸã®å¼•ã„ãŸã‚«ãƒ¼ãƒ‰ã¯ãƒ€ã‚¤ãƒ¤ã®Jã§ã™ã€‚
        ã‚ãªãŸã®ç¾åœ¨ã®å¾—ç‚¹ã¯25ã§ã™ã€‚
        åˆè¨ˆå€¤ãŒ21ã‚’è¶…ãˆãŸã®ã§ã€ã‚ãªãŸã®è² ã‘ã§ã™ã€‚
      end note
    end
  end

  group #LavenderBlush NPC(NPC1, NPC2)ãŒã„ã‚Œã° Hit ã‹ Stand ã‹ã‚’é¸æŠã™ã‚‹ï¼ˆè‡ªå‹•ï¼‰
    alt Y (Hit)
      Game -> ap : NPC ã¯1æšã‚«ãƒ¼ãƒ‰ã‚’å¼•ã
      ap -> Deck : 1æšã‚«ãƒ¼ãƒ‰ã‚’å¼•ã
      Deck --> ap : 1æšã‚«ãƒ¼ãƒ‰ã‚’è¿”ã™
      ap -> ap : å¾—ç‚¹ã‚’è¨ˆç®—ã™ã‚‹

      Game -> Dealer : ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼ã¯ãƒãƒ¼ã‚¹ãƒˆã‹å¦ã‹ãƒã‚§ãƒƒã‚¯ã™ã‚‹
      Dealer -> ap : ãƒãƒ¼ã‚¹ãƒˆã‹å¦ã‹ãƒã‚§ãƒƒã‚¯ã™ã‚‹

      alt ã‚«ãƒ¼ãƒ‰ã®åˆè¨ˆå€¤ãŒ 21 ã‚’è¶…ãˆã¦ã„ãªã„å ´åˆ
        Dealer --> Game :
        Game ->  Message : ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹
        note over Message
          NPC ã®å¼•ã„ãŸã‚«ãƒ¼ãƒ‰ã¯ã‚¹ãƒšãƒ¼ãƒ‰ã®ï¼•ã§ã™ã€‚
          NPC ã®ç¾åœ¨ã®å¾—ç‚¹ã¯20ã§ã™ã€‚ã‚«ãƒ¼ãƒ‰ã‚’å¼•ãã¾ã™ã‹ï¼Ÿï¼ˆY/Nï¼‰
        end note
      else Burst (ã‚«ãƒ¼ãƒ‰ã®åˆè¨ˆå€¤ãŒ 21 ã‚’è¶…ãˆã¦ã„ãŸå ´åˆ)
        Dealer -> ap : ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’\nã€Œburstã€ã«å¤‰æ›´ã™ã‚‹
        Dealer --> Game :

      end
    else N (Stand)

      Game ->  Message : ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹
      note over Message
        NPC ã®å¼•ã„ãŸ2æšç›®ã®ã‚«ãƒ¼ãƒ‰ã¯ãƒ€ã‚¤ãƒ¤ã®2ã§ã—ãŸã€‚
        NPC ã®ç¾åœ¨ã®å¾—ç‚¹ã¯12ã§ã™ã€‚
      end note

      Game -> ap : ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’\nã€Œstandã€ã«å¤‰æ›´ã™ã‚‹

    else å†å…¥åŠ›
      Game ->  Message : ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹
      note over Message
        Y/N ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚ã‚«ãƒ¼ãƒ‰ã‚’å¼•ãã¾ã™ã‹ï¼Ÿï¼ˆY/Nï¼‰
      end note
      Game -> Game : å†å…¥åŠ›
    end

    alt Burst (NPC ã‚«ãƒ¼ãƒ‰ã®åˆè¨ˆå€¤ãŒ 21 ã‚’è¶…ãˆã¦ã„ãŸå ´åˆ)
      Game ->  Message : ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹
      note over Message #Yellow
        NPC ã®å¼•ã„ãŸã‚«ãƒ¼ãƒ‰ã¯ãƒ€ã‚¤ãƒ¤ã®Jã§ã™ã€‚
        NPC ã®ç¾åœ¨ã®å¾—ç‚¹ã¯25ã§ã™ã€‚
        åˆè¨ˆå€¤ãŒ21ã‚’è¶…ãˆãŸã®ã§ã€ NPC ã®è² ã‘ã§ã™ã€‚
      end note
    end
  end

end

group #LightGoldenRodYellow çµæœã‚’åˆ¤å®šã™ã‚‹
  alt Stand (ã‚«ãƒ¼ãƒ‰ã®åˆè¨ˆå€¤ãŒ 21 ä»¥ä¸‹) ã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒæ®‹ã£ã¦ã„ãŸå ´åˆ

      Game -> Dealer : ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼ã¯è‡ªåˆ†ã®ã‚«ãƒ¼ãƒ‰ã®åˆè¨ˆå€¤ãŒ\n 17 ä»¥ä¸Šã«ãªã‚‹ã¾ã§å¼•ãç¶šã‘ã‚‹
    loop
      Dealer -> Deck : 1æšã‚«ãƒ¼ãƒ‰ã‚’å¼•ã
      Deck --> Dealer : 1æšã‚«ãƒ¼ãƒ‰ã‚’è¿”ã™
      Dealer -> Dealer : å¾—ç‚¹ã‚’è¨ˆç®—ã™ã‚‹
      Dealer -> Dealer : ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’å¤‰æ›´ã™ã‚‹
      Dealer ->  Message : ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹
      note over Message
        ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼ã®å¼•ã„ãŸã‚«ãƒ¼ãƒ‰ã¯ãƒãƒ¼ãƒˆã®Kã§ã™ã€‚
      end note
    end

    alt Burst (ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼ã®ã‚«ãƒ¼ãƒ‰ã®åˆè¨ˆå€¤ãŒ 21 ã‚’è¶…ãˆã¦ã„ãŸå ´åˆ)
      Dealer ->  Message : ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹
      note over Message #Yellow
        ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼ã®å¾—ç‚¹ã¯22ã§ã™ã€‚
        åˆè¨ˆå€¤ãŒ21ã‚’è¶…ãˆãŸã®ã§ã€ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼ã¯ãƒãƒ¼ã‚¹ãƒˆã—ã¾ã—ãŸã€‚
        ã‚ãªãŸã®å‹ã¡ã§ã™ï¼ğŸ‰
        ï¼ˆNPCã®å‹ã¡ã§ã™ï¼ğŸ‰ï¼‰
      end note

    else ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼ã®ã‚«ãƒ¼ãƒ‰ã®åˆè¨ˆå€¤ãŒ 21 ã‚’è¶…ãˆã¦ã„ãªã„å ´åˆ

      Dealer -> Dealer : å‹æ•—ã‚’åˆ¤å®šã™ã‚‹
      Dealer -> Dealer : ã‚¹ã‚³ã‚¢ã‚’å–å¾—ã™ã‚‹
      Dealer -> mp : ã‚¹ã‚³ã‚¢ã‚’å–å¾—ã™ã‚‹
      Dealer -> mp : ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’\nwin, lose, draw ã«å¤‰æ›´ã™ã‚‹
      Dealer -> ap : ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’\nwin, lose, draw ã«å¤‰æ›´ã™ã‚‹

      Dealer ->  Message : ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹
      note over Message #Yellow
        ã‚ãªãŸã®å‹ã¡ã§ã™ï¼ğŸ‰
        ï¼ˆNPCã®å‹ã¡ã§ã™ï¼ğŸ‰ï¼‰
      end note
    end
  end
end

deactivate Dealer
deactivate mp
deactivate ap
deactivate Deck
deactivate Game
@enduml
