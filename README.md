# ブラックジャックゲーム

ディーラーとプレイヤーで対戦するコンソールゲームです。

<img src="https://user-images.githubusercontent.com/57904570/190954501-283071d5-6474-4bbd-8830-b8e9c13fd0d1.gif" width="800">

## 作成する目的

下記目的のため、ブラックジャックを PHP、オブジェクト指向を使って実装します。

- 開発現場で必要とされる PHP の知識を習得するため
- プログラムを書くことを通じて、オブジェクト指向を理解するため

<br>

## 概要

### ブラックジャックのルール

ブラックジャックはカジノで行われるカードゲームの一種です。
1〜13 までの数が書かれたカード 52 枚を使ってゲームを行います。

ルールは次の通りです。

- 実行開始時、ディーラーとプレイヤー全員に２枚ずつカードが配られる
- 自分のカードの合計値が 21 に近づくよう、カードを追加するか、追加しないかを決める
- カードの合計値が 21 を超えてしまった時点で、その場で負けが確定する
- プレイヤーはカードの合計値が 21 を超えない限り、好きなだけカードを追加できる
- ディーラーはカードの合計値が 17 を超えるまでカードを追加する

各カードの点数は次のように決まっています。

- 2 から 9 までは、書かれている数の通りの点数
- 10,J,Q,K は 10 点
- A は 1 点あるいは 11 点として、手の点数が最大となる方で数える

最大 3 人までのプレイヤーでプレイします（ディーラーと合わせて合計 4 人）。

自分以外のプレイヤーは CPU が自動的に操作します。

### 環境構築

```bash
# Docker イメージのビルド
docker compose build

# Docker コンテナの起動
docker compose up -d

# Docker コンテナ内でコマンドを実行する
docker compose exec app php -v

# Docker コンテナの停止・削除
docker compose down
```

### 操作説明

以下のフローのように、コンソール（ターミナル）上で動作します。

```bash
docker compose exec app php Main.php
```

- ゲームの設定（プレイヤー人数の設定）をする
- プレイヤーは実行者、ディーラー、NPC プレイヤー は CPU が自動実行する
- 実行開始時、プレイヤーとディーラーはそれぞれ、カードを 2 枚引く。引いたカードは画面に表示する。ただし、ディーラーの 2 枚目のカードは分からないようにする
- その後、先にプレイヤーがカードを引く。プレイヤーのカードの合計値が 21 を超えたらプレイヤーの負け
- プレイヤーはカードを引くたびに次のカードを引くか選択できる
- プレイヤーがカードを引き終えたら、ディーラーは自分のカードの合計値が 17 以上になるまで引き続ける
- プレイヤーとディーラーが引き終えたら勝負。カードの合計値が 21 により近い方が勝ち

コンソール画面のイメージです。

```
ブラックジャックを開始します。
あなたの引いたカードはハートの7です。
あなたの引いたカードはクラブの8です。
ディーラーの引いたカードはダイヤのQです。
ディーラーの引いた2枚目のカードはわかりません。
あなたの現在の得点は15です。カードを引きますか？（Y/N）
Y
あなたの引いたカードはスペードの５です。
あなたの現在の得点は20です。カードを引きますか？（Y/N）
N
ディーラーの引いた2枚目のカードはダイヤの2でした。
ディーラーの現在の得点は12です。
ディーラーの引いたカードはハートのKです。
あなたの得点は20です。
ディーラーの得点は22です。
あなたの勝ちです！
ブラックジャックを終了します。
```

### シーケンス図

ゲームの流れについてのシーケンス図です。

<img src="https://user-images.githubusercontent.com/57904570/190953728-8f2595f8-698c-4ef5-96fa-42be1a4579f9.png" width="800">

<img src="https://user-images.githubusercontent.com/57904570/190953739-12f89cdd-eeb2-4344-a9ef-1bef55006e2c.png" width="800">

<br>

### クラス図

クラス図です。

<img src="https://user-images.githubusercontent.com/57904570/190953613-b8178fd9-af82-466f-bc8e-507222ed6065.png" width="800">

## 備考

- 下記、教材の課題です（本課題に解答はないため、自分で実装したプログラムです）

  - [独学エンジニア](https://dokugaku-engineer.com/)
    - PART3 PHP とオブジェクト指向
      - レッスン 17 ブラックジャックゲームを作ろう

- Qiita 記事にまとめました
  - https://qiita.com/ryamate/items/f77efb0888bb025e5f5b
